<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv='Content-Type' content='application/xhtml+xml; charset=UTF-8' />
    <meta name='Description' content=''>
    <meta name='Keywords' content=''>
    <title>HTML 5 Demos: WebSockets</title>
    <link rel='stylesheet' media='all' type='text/css' href='styles/main.css' />
    <link type="text/css" href="styles/dark-hive/jquery-ui-1.8.5.custom.css" rel="stylesheet" />
    <link rel='stylesheet' media='all' type='text/css' href='styles/demos.css' />
  </head>
  <!-- Conditional CSS include for IE6 and below -->
  <!--[if lt IE 7 ]><body class='ie6 no-js'><![endif]-->
  <!-- Conditional CSS include for IE7 -->
  <!--[if IE 7 ]><body class='ie7 no-js'><![endif]-->
  <!-- Conditional CSS include for IE8 -->
  <!--[if IE 8 ]><body class='ie8 no-js'><![endif]-->
  <!-- Conditional CSS include for IE9 -->
  <!--[if IE 9 ]><body class='ie9 no-js'><![endif]-->
  <!--[if !IE]>--><body class="no-js"><!--<![endif]-->
    <div id="contentWrap">
      <h1 id="pageHeading">WebSockets<span class="csscolumns"> </span></h1>
      <div id="primaryContent">
        <div id="cssBox" class="roundedBox">
          <div class="codeEx">
            <span>Socket Status: <span id="status">Awaiting Connection...
                <button onclick="startSocket();">Start</button></span>
            </span>
          </div>
        </div>
        <div id="affectedContent" class="roundedBox">
	  <div>Wild E. Coyote (ACME) <span id="stock">0.00</span></div>
	  <canvas id="myCanvas" width="400" height="400" style="border:1px dotted;float:left">your browser does
	    not support the canvas tag
          </canvas>
          <fieldset id="websocketInfo" class="roundedBox">
            <legend>Web Socket API <strong>v76</strong>: Understanding How it works</legend>
            Before the connection is established between the client and the server it is mandatory
            requirement that both the parties should agree to do so. The <strong>Handshake</strong> is initiated by client alone.
            <ol>
              <li><span class="emp">Connection and Upgrade</span>: Browser initiates handshake by sending a HTTP GET request.
                <ul><span class="emp">Headers sent</span>
                  <li>Connection: Upgrade - Tells the server that the connection is an upgrade type of connection.</li>
                  <li>Upgrade: WebSocket - Tells the server the protocol to which the connection is to be upgraded.</li>
                  <li>Sec-WebSocket-Key1: -  Key Generated by the client for Challenge Response</li>
                  <li>Sec-WebSocket-Key2: - Key Generated by the client for Challenge Response</li>
                  <li>(Key3): security key - Last 8 bytes used by the server to generate the Challenge Response</li>
                </ul>
              </li>
              <li><span class="emp">Accept Request and Handshake Response</span>:
                <ul>
                  <li>Accept the Socket Connection</li>
                  <li>Request to receive the data Buffer with with security key</li>
                  <li>Perform Handshake: - Utilzing Sec-WebSocket-Key1, Sec-WebSocket-Key2 and (Key3) create challenge response hash</li>
                  <li>Create Response headers
                    <ul>
                      <li>Connection: Upgrade - Tells the client that the connection is an upgrade type of connection.</li>
                      <li>Upgrade: WebSocket - Tells the client the protocol to which the connection is to be upgraded.</li>
                      <li>Challenge Response: This is the Answer (handshake) from the 3 pieces required</li>
                    </ul>
                  </li>
                  <li><em>Fields starting with |Sec-| cannot be set by an attacker from a Web browser, even when using |XMLHttpRequest.</em></li>
                </ul>
              </li>
              <li><span class="emp">Client Browser Validates handshake</span>: only if the challenge response matches the result expected by the client the connection is established, otherwise the connection is closed.</li>
            </ol>
          </fieldset>
        </div>
      </div>
      <fieldset id="SoWhat" class="roundedBox">
        <legend>So What</legend>
        <ul>
          <li>Bi-directional, Full-duplex communication over a single TCP socket.</li>
          <li>500:1 or more reduction in header traffic</li>
          <li>3:1 or more reduction in latency.</li>
          <li>Real-time event driven applications. Web Browser to Server communication</li>
        </ul>
      </fieldset>
    </div>
    <script type='text/javascript' src='./scripts/modernizr.js'></script>
    <script type='text/javascript' src='./scripts/websocket.js'></script>
  </body>
</html>
